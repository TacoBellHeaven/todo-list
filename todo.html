<html>
	<head>
		<link href="styles.css" rel="stylesheet">
		<script>
			let id = 0;
			function addTask ()
			{
				id++;
				let title = document.getElementById('title').value;
				let type = document.getElementById('type').value;
				let priority = document.getElementById('priority').value;
				let date = document.getElementById('date').value;
				var dateArray = date.split("-");
				
				let today = new Date();
				let day = today.getDate();
				let month = today.getMonth()+1;
				let year = today.getFullYear();
				
				if(title=="" || type=="" || priority=="" | date=="")
				{
					alert("All fields must be non-empty");
					return;
				}
				
				if((priority > 5 || priority < 1)||!Number.isInteger(+priority))
				{
					alert("Priority must be a number from 1 to 5");
					document.getElementById('priorityForm').reset();
					return;
				}
				
				if(dateArray[0] < year)
				{
					alert("Given date cannot be in the past");
					document.getElementById('dateForm').reset();
					return;
				}
				else if(dateArray[0] == year)
				{
					if(dateArray[1] < month)
					{
						alert("Given date cannot be in the past");
						document.getElementById('dateForm').reset();
						return;
					}
					else if(dateArray[1] == month)
					{
						if(dateArray[2] < day)
						{
							alert("Given date cannot be in the past");
							document.getElementById('dateForm').reset();
							return;
						}
					}
				}
				
				var newTask1 = "<tr id=\"" + id + "\"><td>" + title + "</td><td>" + type + "</td><td height=\"8%\" width=\"30%\">";
				var newTask2 = "</td><td>" + date.substring(5,7) + "/" + date.substring(8) + "/" + date.substring(0,4) + "</td>";
				var fillStar = "<img src=\"star.png\" width=\"5%\" height=\"5%\">";
				var emptyStar = "<img src=\"nostar.png\" width=\"5%\" height=\"5%\">";
				var exitBox = "<td width=\"5%\"><input height=\"60%\" width=\"60%\" type=\"image\" src=\"exit.png\"  onclick=\"this.parentElement.parentElement.remove()\"></td></tr>";
				
				var fullTask = "";
				fullTask += newTask1;
				for(let i=0; i<priority; i++) fullTask += fillStar;
				for(let i=0; i<5-priority; i++) fullTask += emptyStar;
				fullTask += newTask2;
				fullTask += exitBox;
				document.getElementById('tableBody').innerHTML += fullTask;
				resetAll();
			}
			function resetAll ()
			{
				document.getElementById('titleForm').reset();
				document.getElementById('typeForm').reset();
				document.getElementById('priorityForm').reset();
				document.getElementById('dateForm').reset();
			}
		</script>
	</head>
	<body>
		<form id="titleForm">
		  <label for="title">Title:</label><br>
		  <input type="text" id="title" name="title"><br>
		</form>
		<form id="typeForm">
		  <label for="type">Type:</label><br>
		  <input type="text" id="type" name="type"><br>
		</form>
		<form id="priorityForm">
		  <label for="priority">Priority:</label><br>
		  <input type="text" id="priority" name="priority"><br>
		</form>
		<form id="dateForm">
			<label for="date">Date:</label><br>
			<input type="date" id="date" name="date"><br>
		</form>
		<button onclick="resetAll()">Clear</button>
		<button type="button" onclick="addTask()">Submit</button>
		<table id="mainTable">
			<thead>
				<th>Title</th>
				<th>Type</th>
				<th>Priority</th>
				<th>Date</th>
				<th>Complete</th>
			</thead>
			<tbody id="tableBody">
			
			</tbody>
		</table>
	</body>
</html>